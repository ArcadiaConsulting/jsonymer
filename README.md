jsonymer
======

##JSON Editor for Polymer Web Components
--------




##Features
  - Ability to take in any Javascript Object and make each item editable (as a string)
  - Add/Remove Items
  - Tab through every single key/value, as well as through the *add item* buttons for quick editing
  - Simple API to retrieve the edited object in the same format as shown on screen
  - Will automatically generate a unique key if a new item is added to an object with existing children
  - Will let you know if an object has two (or more) items with the same key
  - Ability to add custom errors
  - Of course, built as a polymer web component for ease of use and integration

##TODO
  - Add callback ability to relevant events (onItemAdded, onItemRemoved, onBeforeItemRemoved, etc)
  - Separate some event function bodies into their own standalone methods for easy use
  - **Bug:** when an item has a duplicate key, and the item *without* the error attached is removed, the item *with* the error attached does not have its error removed (still in error state)  



##Basic Use
--------

Include the web component file in your webpage *head* (or at the top of another component)
```HTML
<link rel="import" href="jsonymer-editor.html">
```

Then, place your `jsonymer-editor` element where you'd like it to be
```HTML
<jsonymer-editor id="myJsonEditor"></jsonymer-editor>
```

Finally, but optionally, give your editor some initial object for editing. If you don't do this, you'll simply start with an empty object. There are two ways to init an object with jsonymer:

#####On the element tag itself using the obj attribute (kinda ugly though)
```HTML
<!-- (repeat: kinda ugly though) -->
<jsonymer-editor obj="{firstname:'Joe'}"></jsonymer-editor>
```
#####Or, through the Javascript element (by changing the obj property)
```javascript
var jsonymerEditor = document.getElementById('myJsonymer');

jsonymerEditor.obj = {
  firstname : 'Joe',
  type : 'Banana'
};
```
Keep in mind, any time you change the *obj* property the editor will update automatically!


##Methods
-----

###.toJSON( )
Returns the object in its final format, as shown on screen.

###.setError(itemIdx, errorId, errorStr, data)
Params:
  - The index ID of the item the error should be set on (an **item** is any key-value combination)
  - A unique error ID (generated by you) that you can use to identify the error. This allows you to have multiple errors on a single item, as well as cherry-pick a specific error to remove when needed. **NOTE:** the errorId *_dup* is currently used internally for duplicate key errors, so using that as an errorId may be problematic.
  - The public facing error string you'd like the user to see when hovering over the item.
  - Any additional data you need for the error for possible future use when clearing the error

This sets an error on a specific object item, making the key of the item a red color, along with an exclaimation mark icon set in between the key and value (these styles can obviously be changed by *you*). The passed **errorStr** argument will show up as a native tooltip as the user hovers over the item. The error will then be stored on the `jsonymerInstance.errors` property, in the format:
```javascript```
errors : {
  "<item-idx>" : {
    "<error-id>" : {
      "error" : "<error-string>",
      "data" : "<error-data>"
    },
    "<error-id-2>" : { ... }
  },
  "<item-idx-2>" : { ... }
}
```
**Note:** This method does nothing if you set `jsonymerInstance.errorsOn = false`.

###.getError(itemIdx, [errorId])
Params:
  - The index ID of the item that has the error you need
  - The error ID that was given when the error was first created

This returns the specific error object with the passed error ID, on the specific item with the passed item ID. If no error id is passed, all errors found on the item with passed item id will be returned.

###.clearError(itemIdx, errorId)
Params:
  - The index ID of the item that has the error you need to remove
  - The unique error ID (you created yourself) that was given when the error was first created

**Note:** This method does nothing if you set `jsonymerInstance.errorsOn = false`.

###.hasError([itemIdx])
Params:
  - *optional*, the unique item ID that you'd like to check for errors on.

Returns true or false based on whether the specified item (or whole object) has an error or not. If you pass an item ID, the method will return a value based on the *validity* of that item only. If you do not pass an item ID, the method will return based on the validity of the whole object in total, returning true if any error is found, and false is no errors.

###.checkDuplicateKeys(itemIdx, value)
Params:
  - The index ID of the item that will get a new key
  - The prospective value for the item (this value will be compared to its siblings)

This compares a prospective key value for an item with the current key values of its siblings and checks if an item already exists with that key. This method returns false if it is safe to apply the key to the item. If a match is found, the first one is immediately returned to you.


